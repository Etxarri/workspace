<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout}">
<head>
    <title layout:title="Encuesta"></title>
</head>
<body layout:fragment="content">
    <div class="col-12 text-center">
        <h3>
            <i class="bi bi-collection"></i>
            <span th:text="${tituloPagina}">Resultados de la Encuesta</span>
        </h3>
    </div>
    <div class="col-10 container-fluid mb-5 mt-3">
        <form th:action="@{/encuestas/{encuestaID}/responder(encuestaID=${encuesta.encuestaID})}" th:object="${encuestaRespuestas}" method="post" class="mx-auto encuesta bg-white p-4 rounded shadow-sm">
            
            <section>
                <h2 th:text="${encuesta.titulo}" class="card-title text-center mt-2 mb-4">Encuesta integracion</h2>
                <div class="form-text mb-4">Diseñada para medir el nivel de integración de personas migrantes a través de un enfoque multidimensional y estandarizado.
                    Está compuesto por 24 preguntas, agrupados en 6 áreas.<br>
                    <strong>Tiempo estimado:</strong> 5-10 minutos.
                    <hr>
                </div>
            </section>

            <section class="card p-4 mb-4" th:each="pregunta : ${preguntas}">
                <h4 th:text="'Área: ' + ${pregunta.area}" class="text-muted mb-3"></h4>

                <div class="mb-3">
                    <label class="form-label pregunta" th:text="${pregunta.texto}">Texto de la pregunta</label>

                    <div class="form-check" th:each="opcion : ${pregunta.opciones}">
                        <input type="radio"
                            th:name="'respuestas[' + ${pregunta.preguntaID} + ']'"
                            th:value="${opcion.valor}"
                            th:id="'pregunta_' + ${pregunta.preguntaID} + '_' + ${opcion.opcionID}"
                            class="form-check-input"
                            required>
                        <label class="form-check-label"
                            th:for="'pregunta_' + ${pregunta.preguntaID} + '_' + ${opcion.opcionID}"
                            th:text="${opcion.texto}"></label>
                    </div>
                </div>
            </section>


            <div class="text-center mt-4">
                <p class="text-muted">Gracias por participar en esta encuesta. Sus respuestas son muy valiosas para nosotros.</p>
                <button type="submit" class="btn btn-primary w-50 px-5 py-3">Enviar encuesta</button>
            </div>
        </form>
    </div>
</body>
</html>