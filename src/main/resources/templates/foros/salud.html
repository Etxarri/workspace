<div th:fragment="contenidoForo">
  <div class="mb-4">
    <h2 class="mb-3"><i class="bi bi-hospital"></i> <span th:text="#{salud.titulo}">Acceso a Sanidad</span></h2>
    <p class="text-muted" th:text="#{salud.descripcion}">Cómo obtener la tarjeta sanitaria, centros de salud y atención primaria.</p>
    <div class="row g-3">
      <div class="col-md-6">
        <div class="card border-primary h-100">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-person-vcard"></i> <span th:text="#{salud.seguros.titulo}">Seguros Médicos</span></h5>
            <p class="card-text" th:text="#{salud.seguros.descripcion}">Diferencias entre sanidad pública y privada, seguros y coberturas.</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card border-success h-100">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-capsule-pill"></i> <span th:text="#{salud.medicamentos.titulo}">Medicamentos y recetas</span></h5>
            <p class="card-text" th:text="#{salud.medicamentos.descripcion}">Cómo funcionan las recetas, farmacias y acceso a medicamentos.</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card border-warning h-100">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-emoji-smile"></i> <span th:text="#{salud.mental.titulo}">Salud mental</span></h5>
            <p class="card-text" th:text="#{salud.mental.descripcion}">Recursos, apoyo psicológico y experiencias personales.</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card border-danger h-100">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-people"></i> <span th:text="#{salud.familias.titulo}">Atención a familias</span></h5>
            <p class="card-text" th:text="#{salud.familias.descripcion}">Pediatría, embarazo, vacunas y salud familiar.</p>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card border-danger h-100">
          <div class="card-body">
            <h5 class="card-title"><i class="bi bi-bandaid"></i> <span th:text="#{salud.emergencias.titulo}">Emergencias</span></h5>
            <p class="card-text" th:text="#{salud.emergencias.descripcion}">Qué hacer y a dónde acudir en caso de urgencia médica.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Preguntas Frecuentes -->
  <div class="mt-5">
    <h4><i class="bi bi-lightbulb"></i> <span th:text="#{salud.faq.titulo}">Preguntas frecuentes</span></h4>
    <div class="accordion" id="faqAccordionSalud">
      <div class="accordion-item">
        <h2 class="accordion-header" id="faqA1">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseA1" aria-expanded="false" aria-controls="faqCollapseA1"
            th:text="#{salud.faq.p1.titulo}">¿Cómo consigo la tarjeta sanitaria?</button>
        </h2>
        <div id="faqCollapseA1" class="accordion-collapse collapse" aria-labelledby="faqA1" data-bs-parent="#faqAccordionSalud">
          <div class="accordion-body" th:text="#{salud.faq.p1.respuesta}">
            Debes empadronarte y acudir a tu centro de salud con tu documentación. Allí te informarán del proceso y requisitos.
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="faqA2">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseA2" aria-expanded="false" aria-controls="faqCollapseA2"
            th:text="#{salud.faq.p2.titulo}">¿Puedo acceder a la sanidad pública sin papeles?</button>
        </h2>
        <div id="faqCollapseA2" class="accordion-collapse collapse" aria-labelledby="faqA2" data-bs-parent="#faqAccordionSalud">
          <div class="accordion-body" th:text="#{salud.faq.p2.respuesta}">
            En muchos casos sí, especialmente para menores y embarazadas. Consulta en tu centro de salud o pregunta en este foro.
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="faqA3">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseA3" aria-expanded="false" aria-controls="faqCollapseA3"
            th:text="#{salud.faq.p3.titulo}">¿Cómo funcionan las recetas electrónicas?</button>
        </h2>
        <div id="faqCollapseA3" class="accordion-collapse collapse" aria-labelledby="faqA3" data-bs-parent="#faqAccordionSalud">
          <div class="accordion-body" th:text="#{salud.faq.p3.respuesta}">
            Debes llevar tu tarjeta sanitaria al médico, quien te dará una receta electrónica que podrás usar en cualquier farmacia.
          </div>
        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header" id="faqA4">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faqCollapseA4" aria-expanded="false" aria-controls="faqCollapseA4"
            th:text="#{salud.faq.p4.titulo}">¿Qué hago en caso de emergencia?</button>
        </h2>
        <div id="faqCollapseA4" class="accordion-collapse collapse" aria-labelledby="faqA4" data-bs-parent="#faqAccordionSalud">
          <div class="accordion-body" th:text="#{salud.faq.p4.respuesta}">
            Llama al 112 o acude al servicio de urgencias más cercano. Lleva siempre tu documentación si es posible.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Botón para añadir pregunta -->
  <div class="alert alert-info mt-4 mb-2 d-flex align-items-center justify-content-between">
    <span><i class="bi bi-question-circle"></i> <span th:text="#{salud.nueva_pregunta.texto}">¿Tienes una nueva duda sobre sanidad?</span></span>
    <a class="btn btn-outline-info btn-sm" data-bs-toggle="collapse" href="#nuevaPreguntaSalud" role="button" aria-expanded="false" aria-controls="nuevaPreguntaSalud">
      <i class="bi bi-plus-circle"></i> <span th:text="#{salud.nueva_pregunta.boton}">Añadir pregunta</span>
    </a>
  </div>
  <div class="collapse" id="nuevaPreguntaSalud">
    <div class="card my-3">
      <div class="card-body">
        <form th:action="@{/foro/preguntasFrecuentes}" method="post">
          <input type="hidden" name="temaId" th:value="${tema.temaID}" />
          <div class="mb-3">
            <label for="preguntaContenidoSalud" class="form-label" th:text="#{salud.nueva_pregunta.label}">Pregunta</label>
            <textarea class="form-control" id="preguntaContenidoSalud" name="contenido" rows="3" required></textarea>
          </div>
          <button type="submit" class="btn btn-info" th:text="#{salud.nueva_pregunta.publicar}">Publicar</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Preguntas de usuarios -->
  <div class="mt-5">
    <h4><i class="bi bi-people"></i> <span th:text="#{salud.preguntas_usuarios.titulo}">Preguntas de usuarios</span></h4>
    <div th:if="${preguntasUsuarios != null and #lists.isEmpty(preguntasUsuarios)}" class="text-muted" th:text="#{salud.preguntas_usuarios.vacio}">
      No hay preguntas publicadas aún. ¡Sé el primero en preguntar!
    </div>
    <div class="list-group">
      <div th:each="pregunta : ${preguntasUsuarios}" class="list-group-item mb-2">
        <a th:href="@{/foro/preguntaUsuario/{preguntaID}(preguntaID=${pregunta.preguntaID})}" style="text-decoration: none; color: inherit;">
            <h6 class="mb-1"><i class="bi bi-question-circle"></i> <span class="pregunta-original" th:text="${pregunta.pregunta}">Título de la pregunta</span></h6>
        </a>

        <small class="text-muted" th:text="${#dates.format(pregunta.fechaCreacion, 'dd/MM/yyyy')}">Fecha</small>
      </div>
    </div>
  </div>
</div>